# COMACROB

This repository contains code used in the "Composing for Acoustic Robots" postdoc research of Alexandros Drymonitis, with the acronym COMACROB. Details on this research can be found [here](https://open-research-europe.ec.europa.eu/articles/5-216).

To use this code, you must have LiveLily installed on your system, which you can find [here](https://github.com/alexdrymonitis/LiveLily). LiveLily is written in openFrameworks, which you can get from [here](https://openframeworks.cc/).
You will also need Notochord, which you can get [here](https://github.com/Intelligent-Instruments-Lab/notochord). Notochord is a Python-based AI model written with PyTorch, so you will need both Python and PyTorch on your system. This is a trained model, so you don't need to train it yourself.

This code has been written to generate music scores for acoustic instruments. It was written to generate notes for a church organ. It was initially used with a MIDI-controlled church organ that was simultaneously played by an instrumentalist. You can use it with any instrument(s) you like, but you'll need a bit of already composed music for the ensemble you want to use. You will have to write the original music in LiveLily, which is close to the Lilypond language. Check the aeolos.lyv file in the lyv_files directory of this repository to see how LiveLily works. Open this file in LiveLily, and hit Shift+Return on each line to execute it and to see the bars in the score.
Once you have some music in the LiveLily language, launch the "generate_notes_osc.py" script". This takes a few arguments which are "--insts name_of_instrument1 name_of_instrument2" depending on how many instruments you have. Each instrument name corresponds to one staff. In the case of the MIDI-controlled organ that was simultaneously played by a performer, the instruments were "left", "right", and "pedal", for each hand and for the pedal of the organ. For the script to generate lines both for the computer-controlled part and the human performer, the argument "--duo true" was used when launching the Python script. This argument enables the script to generate music content for the following staves: "left1", "right1", "pedal1", "left2", "right2", and "pedal2", even though the "--inst" arguments were "left", "right", and "pedal". If the "--duo" argument is omitted, then the script will generate music for one stave per instrument, without the indexes 1, 2, etc. appended to the isntrument names.
The other argument to the script is "--lyv_dir" which sets the directory where the LiveLily files with the composed music are located. The script needs this directory to look up the LiveLily files and parse their lines.

Once you launch the Python script, launch LiveLily and open the midi_organ.lyv or the midi_organ_duo.lyv file, depending on whether you want to use a setup similar to the MIDI-controlled church organ (in which case you'll need the duo file) or to generate music for single instruments, without replications. The path to the directory of the LiveLily files is relative.

A Pd patch with a clicktrack is provided too, in case the performer(s) need a clicktrack in addition to LiveLily's animated score.
